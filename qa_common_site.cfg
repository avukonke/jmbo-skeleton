[buildout]
extends = qa_constants_SITE_NAME_PLACEHOLDER.cfg
extensions=
    lovely.buildouthttp
parts=
    skeleton-supervisor-haproxy
    skeleton-supervisor-deviceproxy
    skeleton-haproxy
    media-links

[skeleton-supervisor-haproxy]
recipe = collective.recipe.template
input = buildout_templates/supervisor-haproxy.conf.in
output = ${buildout:directory}/supervisor/skeleton-qa-${buildout:site-name}-haproxy.conf
name = skeleton-qa-${buildout:site-name}
config = ${buildout:directory}/haproxy/skeleton-qa-${buildout:site-name}.cfg
log = ${buildout:directory}/../log/skeleton-qa-${buildout:site-name}/haproxy.log
error-log = ${buildout:directory}/../log/skeleton-qa-${buildout:site-name}/haproxy-error.log

[skeleton-supervisor-deviceproxy]
recipe = collective.recipe.template
input = buildout_templates/supervisor-deviceproxy.conf.in
output = ${buildout:directory}/supervisor/skeleton-qa-${buildout:site-name}-deviceproxy.conf
name = skeleton-qa-${buildout:site-name}
user = www-data
log = ${buildout:directory}/../log/skeleton-qa-${buildout:site-name}/deviceproxy.log
error-log = ${buildout:directory}/../log/skeleton-qa-${buildout:site-name}/deviceproxy-error.log

[skeleton-haproxy]
recipe = collective.recipe.template
input = buildout_templates/haproxy.cfg.in
output = ${buildout:directory}/haproxy/skeleton-qa-${buildout:site-name}.cfg
host = 127.0.0.1
port-prefix = ${buildout:port-prefix}
name = skeleton-qa-${buildout:site-name}
layers = ${buildout:mobi-layers}

[media-links]
recipe = svetlyak40wt.recipe.symlinks
path = ${buildout:directory}/../media-qa
files =
    ${buildout:directory}/src/django-ckeditor/ckeditor/media/ckeditor
